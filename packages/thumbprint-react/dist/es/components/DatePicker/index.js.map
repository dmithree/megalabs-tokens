{"version":3,"file":"index.js","sources":["../../../../components/DatePicker/index.tsx"],"sourcesContent":["import React from 'react';\nimport DayPicker, { DateUtils, Modifiers } from 'react-day-picker';\n\nimport get from 'lodash/get';\nimport map from 'lodash/map';\nimport findIndex from 'lodash/findIndex';\nimport startOfDay from 'date-fns/start_of_day';\n\nimport styles from './index.module.scss';\n\nimport { validateProps, normaliseValue } from './utilities';\n\nimport { PropTypes } from './types';\n\n/**\n * Thin wrapper around `react-day-picker` that renders a calendar.\n */\nexport default function DatePicker({\n    value = [],\n    onChange,\n    onMonthChange,\n    disabledDays = { before: new Date() },\n    month,\n    lastMonth,\n    allowMultiSelection = false,\n    daysThemeDotIndicator,\n    daysThemeStrikeout,\n}: PropTypes): JSX.Element {\n    validateProps({\n        value,\n        onChange,\n        disabledDays,\n        month,\n        lastMonth,\n        allowMultiSelection,\n        onMonthChange,\n        daysThemeDotIndicator,\n        daysThemeStrikeout,\n    });\n\n    const selectedDays = normaliseValue(value);\n\n    const modifiers: Partial<Modifiers> = {};\n\n    if (typeof daysThemeDotIndicator === 'function') {\n        modifiers['theme-dot'] = daysThemeDotIndicator;\n    }\n\n    if (typeof daysThemeStrikeout === 'function') {\n        modifiers['theme-strikeout'] = daysThemeStrikeout;\n    }\n\n    return (\n        <div className={styles.root}>\n            <DayPicker\n                disabledDays={disabledDays}\n                fromMonth={get(disabledDays, 'before', null)}\n                toMonth={lastMonth}\n                month={month || selectedDays[0]}\n                initialMonth={month || selectedDays[0]}\n                selectedDays={selectedDays}\n                onMonthChange={onMonthChange}\n                modifiers={modifiers}\n                onDayClick={(day, { selected, disabled }): void => {\n                    if (disabled) {\n                        return;\n                    }\n\n                    let newSelectedDays = normaliseValue(value);\n\n                    if (allowMultiSelection) {\n                        if (selected) {\n                            const selectedIndex = findIndex(newSelectedDays, selectedDay =>\n                                DateUtils.isSameDay(selectedDay, day),\n                            );\n                            newSelectedDays.splice(selectedIndex, 1);\n                        } else {\n                            newSelectedDays.push(day);\n                        }\n                    } else {\n                        newSelectedDays = [day];\n                    }\n\n                    onChange(map(newSelectedDays, startOfDay));\n                }}\n            />\n        </div>\n    );\n}\n"],"names":["DatePicker","value","onChange","onMonthChange","disabledDays","before","Date","month","lastMonth","allowMultiSelection","daysThemeDotIndicator","daysThemeStrikeout","validateProps","selectedDays","normaliseValue","modifiers","styles","root","get","day","selected","disabled","newSelectedDays","selectedIndex","findIndex","selectedDay","DateUtils","isSameDay","splice","push","map","startOfDay"],"mappings":";;;;;;;;;AAcA;;;AAGA,AAAe,SAASA,UAAT,OAUY;wBATvBC,KASuB;MATvBA,KASuB,2BATf,EASe;MARvBC,QAQuB,QARvBA,QAQuB;MAPvBC,aAOuB,QAPvBA,aAOuB;+BANvBC,YAMuB;MANvBA,YAMuB,kCANR;IAAEC,MAAM,EAAE,IAAIC,IAAJ;GAMF;MALvBC,KAKuB,QALvBA,KAKuB;MAJvBC,SAIuB,QAJvBA,SAIuB;mCAHvBC,mBAGuB;MAHvBA,mBAGuB,sCAHD,KAGC;MAFvBC,qBAEuB,QAFvBA,qBAEuB;MADvBC,kBACuB,QADvBA,kBACuB;EACvBC,aAAa,CAAC;IACVX,KAAK,EAALA,KADU;IAEVC,QAAQ,EAARA,QAFU;IAGVE,YAAY,EAAZA,YAHU;IAIVG,KAAK,EAALA,KAJU;IAKVC,SAAS,EAATA,SALU;IAMVC,mBAAmB,EAAnBA,mBANU;IAOVN,aAAa,EAAbA,aAPU;IAQVO,qBAAqB,EAArBA,qBARU;IASVC,kBAAkB,EAAlBA;GATS,CAAb;MAYME,YAAY,GAAGC,cAAc,CAACb,KAAD,CAAnC;MAEMc,SAA6B,GAAG,EAAtC;;MAEI,OAAOL,qBAAP,KAAiC,UAArC,EAAiD;IAC7CK,SAAS,CAAC,WAAD,CAAT,GAAyBL,qBAAzB;;;MAGA,OAAOC,kBAAP,KAA8B,UAAlC,EAA8C;IAC1CI,SAAS,CAAC,iBAAD,CAAT,GAA+BJ,kBAA/B;;;SAIA;IAAK,SAAS,EAAEK,MAAM,CAACC;KACnB,oBAAC,SAAD;IACI,YAAY,EAAEb,YADlB;IAEI,SAAS,EAAEc,GAAG,CAACd,YAAD,EAAe,QAAf,EAAyB,IAAzB,CAFlB;IAGI,OAAO,EAAEI,SAHb;IAII,KAAK,EAAED,KAAK,IAAIM,YAAY,CAAC,CAAD,CAJhC;IAKI,YAAY,EAAEN,KAAK,IAAIM,YAAY,CAAC,CAAD,CALvC;IAMI,YAAY,EAAEA,YANlB;IAOI,aAAa,EAAEV,aAPnB;IAQI,SAAS,EAAEY,SARf;IASI,UAAU,EAAE,oBAACI,GAAD,SAAuC;UAA/BC,QAA+B,SAA/BA,QAA+B;UAArBC,QAAqB,SAArBA,QAAqB;;UAC3CA,QAAJ,EAAc;;;;UAIVC,eAAe,GAAGR,cAAc,CAACb,KAAD,CAApC;;UAEIQ,mBAAJ,EAAyB;YACjBW,QAAJ,EAAc;cACJG,aAAa,GAAGC,SAAS,CAACF,eAAD,EAAkB,UAAAG,WAAW;mBACxDC,SAAS,CAACC,SAAV,CAAoBF,WAApB,EAAiCN,GAAjC,CADwD;WAA7B,CAA/B;UAGAG,eAAe,CAACM,MAAhB,CAAuBL,aAAvB,EAAsC,CAAtC;SAJJ,MAKO;UACHD,eAAe,CAACO,IAAhB,CAAqBV,GAArB;;OAPR,MASO;QACHG,eAAe,GAAG,CAACH,GAAD,CAAlB;;;MAGJjB,QAAQ,CAAC4B,GAAG,CAACR,eAAD,EAAkBS,UAAlB,CAAJ,CAAR;;IA9BZ,CADJ;;;;;"}