{"version":3,"file":"themed.js","sources":["../../../../components/UIAction/themed.tsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport warning from 'warning';\nimport classNames from 'classnames';\nimport LoaderDots from '../LoaderDots/index';\nimport { InputRowContext } from '../InputRow/index.jsx';\nimport getAnchorProps from './get-anchor-props';\nimport getButtonProps from './get-button-props';\nimport styles from './themed.module.scss';\n\nenum loaderDotsTheme {\n    primary = 'inverse',\n    secondary = 'brand',\n    tertiary = 'muted',\n}\n\nconst withIcon = (\n    children: React.ReactNode,\n    { icon }: { icon?: React.ReactNode },\n): React.ReactNode => {\n    if (!icon) {\n        return children;\n    }\n\n    return (\n        <span className={styles.flexCenter}>\n            <span\n                className={classNames({\n                    [styles.iconContainer]: true,\n                    [styles.iconContainerHasChildren]: children,\n                })}\n            >\n                {icon}\n            </span>\n            {children}\n        </span>\n    );\n};\n\nconst withLoader = (\n    children: React.ReactNode,\n    {\n        isLoading,\n        theme = 'primary',\n    }: { isLoading?: boolean; theme?: 'primary' | 'secondary' | 'tertiary' },\n): React.ReactNode => {\n    if (!isLoading) {\n        return children;\n    }\n\n    return (\n        <span className={styles.loaderContainer}>\n            <span className={styles.absoluteCenter}>\n                <LoaderDots theme={loaderDotsTheme[theme]} size=\"small\" />\n            </span>\n            <span className={styles.hidden}>{children}</span>\n        </span>\n    );\n};\n\nconst withFlexWrapper = (\n    children: React.ReactNode,\n    { size }: { size?: 'small' | 'large' },\n): React.ReactNode => (\n    <span\n        className={classNames({\n            [styles.flexWrapper]: true,\n            [styles.flexWrapperSizeSmall]: size === 'small',\n            [styles.flexWrapperSizeLarge]: size === 'large',\n        })}\n    >\n        {children}\n    </span>\n);\n\nconst Themed = React.forwardRef<HTMLButtonElement | HTMLAnchorElement, PropTypes>(\n    (\n        {\n            children,\n            isDisabled = false,\n            isLoading = false,\n            icon,\n            type = 'button',\n            to,\n            shouldOpenInNewTab = false,\n            onClick,\n            onMouseEnter,\n            onMouseOver,\n            onFocus,\n            onMouseLeave,\n            onBlur,\n            accessibilityLabel,\n            size = 'large',\n            theme = 'primary',\n            width = 'auto',\n            dataTest,\n        }: PropTypes,\n        ref,\n    ): JSX.Element => {\n        warning(\n            children || accessibilityLabel || (icon && children),\n            'The prop `accessibilityLabel` must be provided to the button or link when `icon` is provided but `children` is not. This helps users on screen readers navigate our content.',\n        );\n\n        return (\n            <InputRowContext.Consumer>\n                {({ isWithinInputRow, isFirstInputRowChild, isLastInputRowChild }): JSX.Element => {\n                    const isAnchor = !!to;\n                    const anchorProps = getAnchorProps({\n                        isDisabled,\n                        shouldOpenInNewTab,\n                        to,\n                        onClick,\n                    });\n                    const buttonProps = getButtonProps({\n                        onClick,\n                        type,\n                        onMouseEnter,\n                        onMouseOver,\n                        onFocus,\n                        onMouseLeave,\n                        onBlur,\n                    });\n\n                    const className = classNames({\n                        [styles.themedButton]: true,\n                        [styles.themedButtonRoundedBordersLeft]:\n                            isFirstInputRowChild || !isWithinInputRow,\n                        [styles.themedButtonRoundedBordersRight]:\n                            isLastInputRowChild || !isWithinInputRow,\n                        [styles.themedButtonHasNoRightBorder]:\n                            isWithinInputRow && !isLastInputRowChild,\n                        [styles.themedButtonThemePrimary]: theme === 'primary',\n                        [styles.themedButtonThemeTertiary]: theme === 'tertiary',\n                        [styles.themedButtonThemeSecondary]: theme === 'secondary',\n                        [styles.themedButtonThemeCaution]: theme === 'caution',\n                        [styles.themedButtonThemeSolid]: theme === 'solid',\n                        [styles.themedButtonThemePopoverPrimary]: theme === 'popover-primary',\n                        [styles.themedButtonThemePopoverSecondary]: theme === 'popover-secondary',\n                        [styles.themedButtonWidthAuto]: width === 'auto' && !isWithinInputRow,\n                        [styles.themedButtonWidthFull]: width === 'full' || isWithinInputRow,\n                        [styles.themedButtonWidthFullBelowSmall]:\n                            width === 'full-below-small' && !isWithinInputRow,\n                    });\n\n                    const commonProps = {\n                        disabled: isLoading || isDisabled,\n                        className,\n                        'aria-label': accessibilityLabel,\n                        'data-test': dataTest,\n                    };\n\n                    // There are more themes here than are valid for use with `LoaderDots`, so restrict the type\n                    // by overwriting any invalid themes as `undefined`.\n                    const restrictedTheme =\n                        theme === 'primary' || theme === 'secondary' || theme === 'tertiary'\n                            ? theme\n                            : undefined;\n\n                    const newChildren = withFlexWrapper(\n                        withLoader(withIcon(children, { icon }), {\n                            isLoading,\n                            theme: restrictedTheme,\n                        }),\n                        { size },\n                    );\n\n                    if (isAnchor) {\n                        return (\n                            <a\n                                {...commonProps}\n                                {...anchorProps}\n                                ref={ref as React.Ref<HTMLAnchorElement>}\n                            >\n                                {newChildren}\n                            </a>\n                        );\n                    }\n\n                    return (\n                        // Disable this rule, even though `buttonProps.type` can never be undefined,\n                        // because the rule itself is broken and shows a false positive.\n                        // https://github.com/yannickcr/eslint-plugin-react/issues/1555\n                        // eslint-disable-next-line react/button-has-type\n                        <button\n                            {...commonProps}\n                            {...buttonProps}\n                            ref={ref as React.Ref<HTMLButtonElement>}\n                        >\n                            {newChildren}\n                        </button>\n                    );\n                }}\n            </InputRowContext.Consumer>\n        );\n    },\n);\n\ninterface PropTypes {\n    /**\n     * Contents displayed within the button.\n     */\n    children?: React.ReactNode;\n    /**\n     * Boolean determining whether the button is disabled. When `true` it will appear visually\n     * \"greyed out\" and not respond to interaction.\n     */\n    isDisabled?: boolean;\n    /**\n     * Boolean determining whether the button is in a loading state. When `true` the text will\n     * we replaced with a loading animation and interaction will be disabled.\n     */\n    isLoading?: boolean;\n    /**\n     * Icon from [Thumbprint Icons](/icons/) to render within the button.\n     */\n    icon?: React.ReactNode;\n    /**\n     * Button's on type `submit` will submit a form when used within a `form`\n     * element.\n     */\n    type?: 'button' | 'submit';\n    /**\n     * Page to navigate to when the anchor is clicked.\n     */\n    to?: string;\n    /**\n     * Opens the URL in a new tab when clicked.\n     */\n    shouldOpenInNewTab?: boolean;\n    /**\n     * Function that will run when the button is clicked on.\n     */\n    onClick?: (event: React.MouseEvent<HTMLButtonElement | HTMLAnchorElement, MouseEvent>) => void;\n    /**\n     * Function that runs when the user hovers on the button.\n     */\n    onMouseEnter?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n    /**\n     * Function that runs when the user hovers on the button. Unlike `onMouseEnter`, `onMouseOver`\n     * fires each time a child element receives focus.\n     */\n    onMouseOver?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n    /**\n     * Function that runs when the user hovers away from the button.\n     */\n    onMouseLeave?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n    /**\n     * Function that runs when the button receives focus.\n     */\n    onFocus?: (event: React.FocusEvent<HTMLButtonElement>) => void;\n    /**\n     * Function that runs when the button loses focus.\n     */\n    onBlur?: (event: React.FocusEvent<HTMLButtonElement>) => void;\n    /**\n     * Description of the buttonâ€™s content. It is required if the button has an icon and no\n     * descriptive text.\n     */\n    accessibilityLabel?: string;\n    /**\n     * Controls the button's background, text, and border color.\n     */\n    theme?:\n        | 'primary'\n        | 'secondary'\n        | 'tertiary'\n        | 'caution'\n        | 'solid'\n        | 'popover-primary'\n        | 'popover-secondary';\n    /**\n     * Changes the button's `line-height`, `padding`, `border-radius`, and `font-size`.\n     */\n    size?: 'small' | 'large';\n    /**\n     * `Button` components are as wide as the content that is passed in. The `full` option will\n     * expand the width to `100%` on all screens. `full-below-small` will expand the width to 100%\n     * on devices smaller than [our `small` breakpoint](/tokens/#section-breakpoint).\n     */\n    width?: 'auto' | 'full' | 'full-below-small';\n    /**\n     * A selector hook into the React component for use in automated testing environments.\n     */\n    dataTest?: string;\n}\n\nexport default Themed;\n"],"names":["loaderDotsTheme","withIcon","children","icon","styles","flexCenter","classNames","iconContainer","iconContainerHasChildren","withLoader","isLoading","theme","loaderContainer","absoluteCenter","hidden","withFlexWrapper","size","flexWrapper","flexWrapperSizeSmall","flexWrapperSizeLarge","Themed","React","forwardRef","ref","isDisabled","type","to","shouldOpenInNewTab","onClick","onMouseEnter","onMouseOver","onFocus","onMouseLeave","onBlur","accessibilityLabel","width","dataTest","warning","isWithinInputRow","isFirstInputRowChild","isLastInputRowChild","isAnchor","anchorProps","getAnchorProps","buttonProps","getButtonProps","className","themedButton","themedButtonRoundedBordersLeft","themedButtonRoundedBordersRight","themedButtonHasNoRightBorder","themedButtonThemePrimary","themedButtonThemeTertiary","themedButtonThemeSecondary","themedButtonThemeCaution","themedButtonThemeSolid","themedButtonThemePopoverPrimary","themedButtonThemePopoverSecondary","themedButtonWidthAuto","themedButtonWidthFull","themedButtonWidthFullBelowSmall","commonProps","disabled","restrictedTheme","undefined","newChildren"],"mappings":"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"}